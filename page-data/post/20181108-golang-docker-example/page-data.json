{"componentChunkName":"component---src-templates-blog-post-js","path":"/post/20181108-golang-docker-example/","result":{"data":{"site":{"siteMetadata":{"title":"lqqyt2423's blog"}},"markdownRemark":{"id":"16967466-3669-553d-8003-5d91cb5012b7","excerpt":"源代码 hello.go Dockerfile 一步构建 多阶段构建 优点是最终生成的  很小。 打包命令 运行实例","html":"<h2>源代码 hello.go</h2>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Dockerfile</h2>\n<h3>一步构建</h3>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> golang<span class=\"token punctuation\">:</span>1.11<span class=\"token punctuation\">-</span>alpine\n<span class=\"token keyword\">WORKDIR</span> /go/src/helloworld\n<span class=\"token keyword\">COPY</span> . .\n<span class=\"token keyword\">RUN</span> go install <span class=\"token punctuation\">-</span>v ./\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"helloworld\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h3>多阶段构建</h3>\n<p>优点是最终生成的 <code class=\"language-text\">image</code> 很小。</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token keyword\">FROM</span> golang<span class=\"token punctuation\">:</span>1.11<span class=\"token punctuation\">-</span>alpine\n<span class=\"token keyword\">WORKDIR</span> /go/src/helloworld\n<span class=\"token keyword\">COPY</span> . .\n<span class=\"token keyword\">RUN</span> CGO_ENABLED=0 GOOS=linux go build <span class=\"token punctuation\">-</span>a <span class=\"token punctuation\">-</span>installsuffix cgo <span class=\"token punctuation\">-</span>o app .\n\n<span class=\"token keyword\">FROM</span> alpine<span class=\"token punctuation\">:</span>latest\n<span class=\"token keyword\">RUN</span> apk <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>no<span class=\"token punctuation\">-</span>cache add ca<span class=\"token punctuation\">-</span>certificates\n<span class=\"token keyword\">WORKDIR</span> /root\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>from=0 /go/src/helloworld/app .\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"./app\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>打包命令</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker build -t go-helloworld .</code></pre></div>\n<h2>运行实例</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run --rm go-helloworld</code></pre></div>","frontmatter":{"title":"Golang Docker 示例","date":"November 07, 2018","description":""}}},"pageContext":{"slug":"/20181108-golang-docker-example/","previous":{"fields":{"slug":"/20180721-mongo-performance-optimization/","path":"/post/20180721-mongo-performance-optimization/"},"frontmatter":{"title":"Mongo 性能优化相关"}},"next":{"fields":{"slug":"/20181108-docker-note/","path":"/post/20181108-docker-note/"},"frontmatter":{"title":"Docker 学习笔记"}}}}}